ユーザとグループ
====

ユーザ
----

* Unix系OSは、マルチユーザOSと呼ばれています
    * 1つのシステムを複数のユーザ(user)が別々に使うことができる
    * Windowsも同じ
* 普通使うのは利用者用のユーザですが、裏にはシステム用に定義された多くのユーザが存在します
    * linuxでは`/etc/passwd`というファイルに(いろいろな設定とともに)ユーザの一覧が書かれています
    * このファイルはOSXにもありますが、独自システムも併用されているため読んでも正直よくわかりません
    * まあ、いじることもないとは思いますが……

グループ
----

* ユーザをまとめる単位として、グループ(group)というものがあります
    * ちなみにWindowsにもあります
* グループもシステムで用意されたものが数多く存在します
    * linuxでは`/etc/group`というファイルに(いろいろな設定とともに)グループの一覧が書かれています
    * このファイルはOSXにもありますが(以下略)
* ユーザは必ず最低1つのグループに所属しています
    * メインで所属しているグループを、そのユーザのプライマリグループと言います
    * プライマリグループ以外にも、複数のグループに所属させることができます
* `id`コマンドを実行してみましょう

```
macmini-ssuzuki:~ ssuzuki$ id
uid=501(ssuzuki) gid=20(staff) groups=20(staff),503(com.apple.local.ard_interact),502(com.apple.local.ard_reports),500(com.apple.access_ssh),403(com.apple.sharepoint.group.2),402(com.apple.sharepoint.group.1),12(everyone),33(_appstore),61(localaccounts),79(_appserverusr),80(admin),81(_appserveradm),98(_lpadmin),100(_lpoperator),204(_developer),404(com.apple.sharepoint.group.3),501(com.apple.local.ard_admin),504(com.apple.local.ard_manage),401(com.apple.access_screensharing)
macmini-ssuzuki:~ ssuzuki$
```

* `uid`は、ユーザのIDです。
    * IDが501のユーザが`ssuzuki`という名前
* `gid`は、ユーザのプライマリグループのIDです
    * IDが20のグループが`staff`という名前
* `groups=`から続く部分は、プライマリグループ以外に所属しているグループです
    * デフォルトで多くのグループに所属しています

ファイルの所有者
----

* ファイルやディレクトリには、それを所有するユーザとグループが設定されています
    * `ls -l`での出力における3ブロック目が所有ユーザ("`ssuzuki`とか`root`とかの部分")
    * `ls -l`での出力における4ブロック目がグループ("`staff`とか`wheel`とかの部分")

rootユーザと管理者ユーザ
----

* システムの全権限を持つ強力なユーザを**ルートユーザ**と言います
    * 他にも**スーパーユーザ**、**アドミニストレータ**などの呼び方がある
    * ユーザ名は`root`
* 設定に関係なく全ての動作を行うことが可能な神のようなユーザ
    * じゃあなんでも`root`でやればいいんじゃない？
* 強力なだけに危険も大きい
    * 簡単にシステムの重要なファイルを消して起動不可能にしたり……
    * 悪意ある人間に乗っ取られたらいいように使われてしまったり……
    * 最近はなるべく使わないことが推奨される
* 実運用上は、各ユーザに対して「管理ユーザ」としての権限を与える場合が多い
    * ルートユーザよりはできることが少ないけど、普通にシステムの管理をする分には事足りる
